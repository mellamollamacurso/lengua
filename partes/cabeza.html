<div class="top-bar" aria-hidden="true"></div>

<img class="logo" src="{{ '/inicial/a03.gif' | relative_url }}" alt="Cultura Hispánica" />

<div class="menu-slot">
  <nav class="navbar" id="navbar">
    <ul class="nav-list" id="navList">
      <li class="nav-item has-dropdown" data-idx="0">
        <a class="nav-link" href="#">Inicio <span class="caret"></span></a>
        <div class="popover" role="menu">
          <ul>
            <li><a href="#" role="menuitem">Conoce el curso</a></li>
            <li><a href="#" role="menuitem">Eventos</a></li>
            <li><a href="#" role="menuitem">Materiales</a></li>
          </ul>
        </div>
      </li>
      <li class="nav-item has-dropdown" data-idx="1">
        <a class="nav-link" href="#">Alumno <span class="caret"></span></a>
        <div class="popover" role="menu">
          <ul>
            <li><a href="#" role="menuitem">Ejercicios</a></li>
            <li><a href="#" role="menuitem">Pruebas</a></li>
            <li><a href="#" role="menuitem">Materiales</a></li>
          </ul>
        </div>
      </li>
      <li class="nav-item has-dropdown" data-idx="2">
        <a class="nav-link" href="#">Profesor <span class="caret"></span></a>
        <div class="popover" role="menu">
          <ul>
            <li><a href="#" role="menuitem">Libros</a></li>
            <li><a href="#" role="menuitem">Guías</a></li>
            <li><a href="#" role="menuitem">Asistencia</a></li>
          </ul>
        </div>
      </li>
      <li class="nav-item has-dropdown active" data-idx="3">
        <a class="nav-link" href="#">Contacto <span class="caret"></span></a>
        <div class="popover" role="menu">
          <ul>
            <li><a href="#" role="menuitem">Agendar citas</a></li>
            <li><a href="#" role="menuitem">Dudas</a></li>
            <li><a href="#" role="menuitem">Test de nivel</a></li>
          </ul>
        </div>
      </li>
    </ul>
    <span class="nav-underline" id="navUnderline"></span>
  </nav>
</div>

<div class="account" aria-label="acceder">
  <div class="avatar" aria-hidden="true"></div>
  <div class="acc-label">acceder</div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function () {
  const ul = document.getElementById('navList');
  const underline = document.getElementById('navUnderline');
  if (ul && underline) {
    function placeUnderlineTo(li){
      const r = li.getBoundingClientRect();
      const pr = ul.getBoundingClientRect();
      underline.style.left = (r.left - pr.left + 8) + 'px';
      underline.style.width = Math.max(0, r.width - 16) + 'px';
    }
    const active = ul.querySelector('.nav-item.active') || ul.querySelector('.nav-item');
    if (active) placeUnderlineTo(active);
    ul.querySelectorAll('.nav-item').forEach(li => {
      li.addEventListener('mouseenter', () => placeUnderlineTo(li));
      li.addEventListener('focusin', () => placeUnderlineTo(li));
    });
    ul.addEventListener('mouseleave', () => active && placeUnderlineTo(active));
  }
  // Dropdown open/close
  document.querySelectorAll('.has-dropdown').forEach(li => {
    li.addEventListener('mouseenter', () => li.classList.add('open'));
    li.addEventListener('mouseleave', () => li.classList.remove('open'));
    const a = li.querySelector('.nav-link');
    if (a) a.addEventListener('click', (e) => e.preventDefault());
  });
});
</script>

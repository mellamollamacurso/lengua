<div class="top-bar" aria-hidden="true"></div>
<img class="logo" src="{{ '/inicial/a03.gif' | relative_url }}" alt="Cultura Hispánica" />
<div class="menu-slot">
  <nav class="navbar" id="navbar">
    <ul class="nav-list" id="navList">
      <li class="nav-item has-dropdown" data-idx="0">
        <a class="nav-link" href="#">Inicio <span class="caret"></span></a>
        <div class="popover" role="menu"><ul>
          <li><a href="#" role="menuitem">Conoce el curso</a></li>
          <li><a href="#" role="menuitem">Eventos</a></li>
          <li><a href="#" role="menuitem">Materiales</a></li>
        </ul></div>
      </li>
      <li class="nav-item has-dropdown" data-idx="1">
        <a class="nav-link" href="#">Alumno <span class="caret"></span></a>
        <div class="popover" role="menu"><ul>
          <li><a href="#" role="menuitem">Ejercicios</a></li>
          <li><a href="#" role="menuitem">Pruebas</a></li>
          <li><a href="#" role="menuitem">Materiales</a></li>
        </ul></div>
      </li>
      <li class="nav-item has-dropdown" data-idx="2">
        <a class="nav-link" href="#">Profesor <span class="caret"></span></a>
        <div class="popover" role="menu"><ul>
          <li><a href="#" role="menuitem">Libros</a></li>
          <li><a href="#" role="menuitem">Guías</a></li>
          <li><a href="#" role="menuitem">Asistencia</a></li>
        </ul></div>
      </li>
      <li class="nav-item has-dropdown" data-idx="3">
        <a class="nav-link" href="#">Contacto <span class="caret"></span></a>
        <div class="popover" role="menu"><ul>
          <li><a href="#" role="menuitem">Agendar citas</a></li>
          <li><a href="#" role="menuitem">Dudas</a></li>
          <li><a href="#" role="menuitem">Test de nivel</a></li>
        </ul></div>
      </li>
    </ul>
    <span class="nav-underline" id="navUnderline"></span>
  </nav>
</div>
<div class="account" aria-label="acceder">
  <div class="avatar" aria-hidden="true"></div>
  <div class="acc-label">acceder</div>
</div>

<script>
const nav=document.getElementById('navbar'),ul=document.getElementById('navList'),underline=document.getElementById('navUnderline');
function placeUnderlineTo(li,instant=false){const c=nav.getBoundingClientRect(),r=li.getBoundingClientRect(),left=r.left-c.left,width=r.width;if(instant){underline.style.transition='none';underline.style.left=left+'px';underline.style.width=width+'px';void underline.offsetWidth;underline.style.transition='left .15s,width .15s';return}const a=ul.querySelector('.nav-item.active')||li,fr=a.getBoundingClientRect(),fl=fr.left-c.left,frt=fl+fr.width,tl=left,tr=left+width;underline.style.transition='left .15s,width .15s';if(tl>fl){underline.style.left=fl+'px';underline.style.width=(tr-fl)+'px';setTimeout(()=>{underline.style.left=tl+'px';underline.style.width=width+'px'},170)}else{underline.style.left=tl+'px';underline.style.width=(frt-tl)+'px';setTimeout(()=>{underline.style.width=width+'px'},170)}}
function closeAll(){ul.querySelectorAll('.has-dropdown.open').forEach(li=>li.classList.remove('open'))}
ul.addEventListener('click',e=>{const l=e.target.closest('.nav-link');if(!l)return;e.preventDefault();const li=l.closest('.nav-item');if(li.classList.contains('has-dropdown')){const open=li.classList.toggle('open');ul.querySelectorAll('.has-dropdown').forEach(o=>{if(o!==li)o.classList.remove('open')});ul.querySelectorAll('.nav-item').forEach(it=>it.classList.toggle('active',it===li));placeUnderlineTo(li);return}else{closeAll()}ul.querySelectorAll('.nav-item').forEach(it=>it.classList.toggle('active',it===li));placeUnderlineTo(li)});
document.addEventListener('click',e=>{if(!nav.contains(e.target)) closeAll()});document.addEventListener('keydown',e=>{if(e.key==='Escape') closeAll()});
window.addEventListener('load',()=>{placeUnderlineTo(ul.querySelector('.nav-item.active')||ul.querySelector('.nav-item'),true)});window.addEventListener('resize',()=>{placeUnderlineTo(ul.querySelector('.nav-item.active')||ul.querySelector('.nav-item'),true)});
</script>
